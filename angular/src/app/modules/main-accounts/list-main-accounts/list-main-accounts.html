<div class="main-accounts-list" @pageEnter>
  <div class="list-header">
    <button type="button" class="btn-add" routerLink="/main-accounts/create" @buttonEnter>
      <span class="btn-icon">+</span>
      {{ 'MainAccount::AddMainAccount' | abpLocalization }}
    </button>
  </div>

  <div *ngIf="accounts?.length > 0; else noData">
    <div class="table-wrapper" @tableEnter>
      <table class="table" id="tblGrid">
        <thead>
          <tr>
            <th>{{ 'MainAccount::AccountNumber' | abpLocalization }}</th>
            <th>{{ 'MainAccount::AccountName' | abpLocalization }}</th>
            <th>{{ 'MainAccount::Title' | abpLocalization }}</th>
            <th>{{ 'MainAccount::TransferredTo' | abpLocalization }}</th>
            <th>{{ 'MainAccount::Status' | abpLocalization }}</th>
            <th>{{ 'MainAccount::CreatedDate' | abpLocalization }}</th>
            <th>{{ 'MainAccount::Actions' | abpLocalization }}</th>
          </tr>
        </thead>

        <tbody @rowStagger>
          <ng-container *ngFor="let account of accounts; trackBy: trackById">
            <tr class="data-row">
            <td [attr.data-label]="'MainAccount::AccountNumber' | abpLocalization">{{ account.accountNumber || '-' }}</td>
            <td [attr.data-label]="'MainAccount::AccountName' | abpLocalization">{{ account.accountName | bilingualName:account.accountNameEn }}</td>
            <td [attr.data-label]="'MainAccount::Title' | abpLocalization">{{ account.title | bilingualName:account.titleEn }}</td>
            <td [attr.data-label]="'MainAccount::TransferredTo' | abpLocalization">{{ account.transferredTo | bilingualName:account.transferredToEn }}</td>
            <td [attr.data-label]="'MainAccount::Status' | abpLocalization">
              <span
                class="status"
                [class.active]="account.isActive"
                [class.inactive]="!account.isActive">
                {{ (account.isActive ? 'MainAccount::Active' : 'MainAccount::Inactive') | abpLocalization }}
              </span>
            </td>
            <td [attr.data-label]="'MainAccount::CreatedDate' | abpLocalization">
              {{ account.creationTime | date:'medium' }}
            </td>
            <td [attr.data-label]="'MainAccount::Actions' | abpLocalization" class="actions-cell">
              <a [routerLink]="['/main-accounts/edit', account.id]" class="btn btn-sm btn-outline-primary me-1">
                {{ 'MainAccount::Update' | abpLocalization }}
              </a>
              <button type="button" class="btn btn-sm btn-outline-danger" (click)="deleteAccount(account)">
                {{ 'MainAccount::Delete' | abpLocalization }}
              </button>
            </td>
          </tr>

          <ng-container *ngIf="account.children?.length > 0">
            <tr *ngFor="let child of account.children" class="child-row">
              <td [attr.data-label]="'MainAccount::AccountNumber' | abpLocalization">{{ child.accountNumber || '-' }}</td>
              <td [attr.data-label]="'MainAccount::AccountName' | abpLocalization">{{ child.accountName | bilingualName:child.accountNameEn }}</td>
              <td [attr.data-label]="'MainAccount::Title' | abpLocalization">{{ child.title | bilingualName:child.titleEn }}</td>
              <td [attr.data-label]="'MainAccount::TransferredTo' | abpLocalization">{{ child.transferredTo | bilingualName:child.transferredToEn }}</td>
              <td [attr.data-label]="'MainAccount::Status' | abpLocalization">
                <span
                  class="status"
                  [class.active]="child.isActive"
                  [class.inactive]="!child.isActive">
                  {{ (child.isActive ? 'MainAccount::Active' : 'MainAccount::Inactive') | abpLocalization }}
                </span>
              </td>
              <td [attr.data-label]="'MainAccount::CreatedDate' | abpLocalization">
                {{ child.creationTime | date:'medium' }}
              </td>
              <td [attr.data-label]="'MainAccount::Actions' | abpLocalization" class="actions-cell">
                <a [routerLink]="['/main-accounts/edit', child.id]" class="btn btn-sm btn-outline-primary me-1">
                  {{ 'MainAccount::Update' | abpLocalization }}
                </a>
                <button type="button" class="btn btn-sm btn-outline-danger" (click)="deleteAccount(child)">
                  {{ 'MainAccount::Delete' | abpLocalization }}
                </button>
              </td>
            </tr>
          </ng-container>
        </ng-container>
      </tbody>
    </table>
  </div>
</div>

<ng-template #noData>
  <div class="empty-state" role="alert" @noDataEnter>
    <div class="empty-state-icon">ðŸ“‹</div>
    <p class="empty-state-text">{{ 'MainAccount::NoAccountsFound' | abpLocalization }}</p>
  </div>
</ng-template>
</div>